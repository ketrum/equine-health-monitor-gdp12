<svg xmlns:gliffy="http://www.gliffy.com" xmlns:x="http://ns.adobe.com/Extensibility/1.0/" xmlns:i="http://ns.adobe.com/AdobeIllustrator/10.0/" xmlns:graph="http://ns.adobe.com/Graphs/1.0/" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="634" height="401"><rect stroke="#000000" stroke-width="0" fill="#ffffff" x="0" y="0" width="633" height="400"/><g transform='translate(15.0,11.0) rotate(0 300.0 185.0)'><rect width='27.0' height='370.0'  stroke="#000000" stroke-width="2" fill="#ffffff"></rect><g transform='translate(-171.5, 370.0) rotate(270)'><g  transform='translate(0.0,193.0)'><text x='185.0' style='text-anchor: middle' y='-3.0'><tspan xml:space='preserve' font-size='18' font-family='Arial' fill='#000000' >execution context</tspan></text></g></g><rect x='27.0' y='0.0' width='573.0' height='160.0'  stroke="#000000" stroke-width="2" fill="none"/><g transform='translate(27.0, 160.0) rotate(270)'><g  transform='translate(0.0,23.0)'><text x='80.0' style='text-anchor: middle' y='-3.0'><tspan xml:space='preserve' font-size='18' font-family='Arial' fill='#000000' >interrupt</tspan></text></g></g><rect x='27.0' y='160.0' width='573.0' height='210.0'  stroke="#000000" stroke-width="2" fill="none"/><g transform='translate(27.0, 370.0) rotate(270)'><g  transform='translate(0.0,23.0)'><text x='105.0' style='text-anchor: middle' y='-3.0'><tspan xml:space='preserve' font-size='18' font-family='Arial' fill='#000000' >main</tspan></text></g></g></g><g transform='translate(218.25,200.953125) rotate(0 76.75 68.046875)'><defs><linearGradient id='g1' x1='50%' y1='-25%' x2='50%' y2='100%'><stop stop-color='white' offset='0%'/><stop stop-color='#d1d1d1' offset='100%'/></linearGradient></defs><g transform='translate(4.0,4.0)'><ellipse cx="76.75" cy="68.046875" rx="76.75" ry="68.046875" stroke="#A8A8A8" stroke-width="0" stroke-opacity=".6" fill-opacity=".6" fill="#A8A8A8"/></g><ellipse cx="76.75" cy="68.046875" rx="76.75" ry="68.046875" stroke="#333333" stroke-width="2" style="fill:url(#g1)"/><g  transform='translate(0.0,21.046875)'><text x='2' style='text-anchor: start' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' font-weight='bold' >main loop</tspan></text><text x='2' style='text-anchor: start' y='11.4'><tspan/></text><text x='2' style='text-anchor: start' y='26.200000000000003'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >      if(flag set)</tspan></text><text x='2' style='text-anchor: start' y='41.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >          execute  read</tspan></text><text x='2' style='text-anchor: start' y='55.8'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >function</tspan></text><text x='2' style='text-anchor: start' y='70.6'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >          unset the flag</tspan></text><text x='2' style='text-anchor: start' y='85.39999999999999'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >      else</tspan></text><text x='2' style='text-anchor: start' y='100.19999999999999'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >          sleep</tspan></text></g></g><g transform='translate(407.0,32.5) rotate(0 77.5 37.5)'><defs><linearGradient id='g2' x1='50%' y1='-25%' x2='50%' y2='100%'><stop stop-color='white' offset='0%'/><stop stop-color='#d1d1d1' offset='100%'/></linearGradient></defs><g transform='translate(4.0,4.0)'><rect width="155.0" height="75.0" stroke="#A8A8A8" stroke-width="0" stroke-opacity=".6" fill-opacity=".6" fill="#A8A8A8"/></g><rect width="155.0" height="75.0" stroke="#333333" stroke-width="2" style="fill:url(#g2)"/><g  transform='translate(0.0,20.5)'><text x='77.5' style='text-anchor: middle' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' font-weight='bold' >AlarmManager (RTC ISR)</tspan></text><text x='77.5' style='text-anchor: middle' y='11.4'><tspan/></text><text x='77.5' style='text-anchor: middle' y='26.200000000000003'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >trigger alarm if period</tspan></text><text x='77.5' style='text-anchor: middle' y='41.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >reached</tspan></text></g></g><g transform='translate(116.0,32.5) rotate(0 50.0 37.5)'><defs><linearGradient id='g3' x1='50%' y1='-25%' x2='50%' y2='100%'><stop stop-color='white' offset='0%'/><stop stop-color='#d1d1d1' offset='100%'/></linearGradient></defs><g transform='translate(4.0,4.0)'><rect width="100.0" height="75.0" stroke="#A8A8A8" stroke-width="0" stroke-opacity=".6" fill-opacity=".6" fill="#A8A8A8"/></g><rect width="100.0" height="75.0" stroke="#333333" stroke-width="2" style="fill:url(#g3)"/><g  transform='translate(0.0,20.5)'><text x='50.0' style='text-anchor: middle' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' font-weight='bold' >Alarm callback</tspan></text><text x='50.0' style='text-anchor: middle' y='12.8'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' font-weight='bold' >function</tspan></text><text x='50.0' style='text-anchor: middle' y='26.200000000000003'><tspan/></text><text x='50.0' style='text-anchor: middle' y='41.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >set flag</tspan></text></g></g><g transform='translate(407.0,70.00000000000001)'><line x1='0.0' y1='0.0' x2='-189.0' y2='-1.4455784075031474E-14' stroke-dasharray='23, 0' stroke='#000000' stroke-width='2' /><g transform='translate(-191.0,-1.4210854715202004E-14) rotate(360.0)'><polygon points='3.0,0 9.0,-3.0 9.0,3.0' fill='#000000' stroke='#000000' stroke-width='2.0' /></g></g><g transform='translate(295.0,200.953125)'><path d='M0.0,0.0 L0.0,-36.7265625 Q0.0,-46.7265625 10.0,-46.7265625 L179.5,-46.7265625 Q189.5,-46.7265625 189.5,-56.7265625 L189.5,-90.453125 ' stroke-dasharray='23, 0' fill='none' stroke='#000000' stroke-width='2' /><g transform='translate(189.5,-93.453125) rotate(450.0)'><polygon points='3.0,0 9.0,-3.0 9.0,3.0' fill='#000000' stroke='#000000' stroke-width='2.0' /></g></g><g transform='translate(166.0,107.5)'><path d='M0.0,0.0 L0.0,151.5 Q0.0,161.5 10.0,161.5 L49.25,161.5 ' stroke-dasharray='23, 0' fill='none' stroke='#000000' stroke-width='2' /><g transform='translate(52.25,161.5) rotate(180.0)'><polygon points='3.0,0 9.0,-3.0 9.0,3.0' fill='#000000' stroke='#000000' stroke-width='2.0' /></g></g><g transform='translate(497.0,232.5) rotate(0 50.0 37.5)'><defs><linearGradient id='g7' x1='50%' y1='-25%' x2='50%' y2='100%'><stop stop-color='white' offset='0%'/><stop stop-color='#d1d1d1' offset='100%'/></linearGradient></defs><g transform='translate(4.0,4.0)'><rect width="100.0" height="75.0" stroke="#A8A8A8" stroke-width="0" stroke-opacity=".6" fill-opacity=".6" fill="#A8A8A8"/></g><rect width="100.0" height="75.0" stroke="#333333" stroke-width="2" style="fill:url(#g7)"/><g  transform='translate(0.0,27.5)'><text x='50.0' style='text-anchor: middle' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' font-weight='bold' >Sensor</tspan></text><text x='50.0' style='text-anchor: middle' y='11.4'><tspan/></text><text x='50.0' style='text-anchor: middle' y='26.200000000000003'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >read data</tspan></text></g></g><g transform='translate(371.75,269.0)'><path d='M0.0,0.0 L52.625,0.0 Q62.625,0.0 62.625,0.0 L62.625,0.0 Q62.625,0.0 62.625,0.0 L122.25,0.0 ' stroke-dasharray='23, 0' fill='none' stroke='#000000' stroke-width='2' /><g transform='translate(125.25,0.0) rotate(180.0)'><polygon points='3.0,0 9.0,-3.0 9.0,3.0' fill='#000000' stroke='#000000' stroke-width='2.0' /></g></g><g transform='translate(547.0,307.5)'><path d='M0.0,0.0 L0.0,43.546875 Q0.0,53.546875 -10.0,53.546875 L-242.0,53.546875 Q-252.0,53.546875 -252.0,43.546875 L-252.0,32.546875 ' stroke-dasharray='23, 0' fill='none' stroke='#000000' stroke-width='2' /><g transform='translate(-252.0,29.546875) rotate(450.0)'><polygon points='3.0,0 9.0,-3.0 9.0,3.0' fill='#000000' stroke='#000000' stroke-width='2.0' /></g></g><g transform='translate(276.0,131.5) rotate(0 75.0 12.5)'><g  transform='translate(0.0,17.5)'><text x='75.0' style='text-anchor: middle' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >1. RTC interrupt</tspan></text></g></g><g transform='translate(260.25,44.75) rotate(0 63.75 15.25)'><g  transform='translate(0.0,20.25)'><text x='63.75' style='text-anchor: middle' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >2. call alarm handler</tspan></text></g></g><g transform='translate(78.0,201.5) rotate(-90 75.0 12.5)'><g  transform='translate(0.0,17.5)'><text x='75.0' style='text-anchor: middle' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >3. ISR finished</tspan></text></g></g><g transform='translate(374.0,236.5) rotate(0 58.0 17.5)'><g  transform='translate(0.0,22.5)'><text x='58.0' style='text-anchor: middle' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >4. call read data </tspan></text></g></g><g transform='translate(347.0,335.0) rotate(0 81.0 10.0)'><g  transform='translate(0.0,15.0)'><text x='81.0' style='text-anchor: middle' y='-2.0'><tspan xml:space='preserve' font-size='12' font-family='Arial' fill='#000000' >5. read data finished</tspan></text></g></g></svg>